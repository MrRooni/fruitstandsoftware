<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.12), see www.w3.org">
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1">

  <title>Bypassing the Trouble Caused by Updating an iPhone App Provisioning Profile | Core Fruition</title>
  
  
  
</head>

<body>
  <h1>Bypassing the Trouble Caused by Updating an iPhone App Provisioning Profile</h1><a href="index.html" title="12:45 PM" rel="bookmark"></a>

  <p><strong>[UPDATE]</strong> After many discussions on Twitter and many recommendations by different folks, I think that we have determined that the method outlined below is not necessary. &#194;&nbsp;<a href="http://twitter.com/heymac">Mike Taylor</a> has hit upon what appears to be a foolproof method for getting around the trouble caused by updating an iPhone app provisioning profile, and best of all, he did it in 140 characters:</p>

  <blockquote>
    <p>@<a style="text-decoration: none; color: #2fc2ef; padding: 0px; margin: 0px;" href="http://twitter.com/kalperin">kalperin</a> @<a style="text-decoration: none; color: #2fc2ef; padding: 0px; margin: 0px;" href="http://twitter.com/MrRooni">MrRooni</a> Delete old profile from Organizer. Download new profile &#8216;n drag to organizer. Restart Xcode. Choose new profile in target</p>
  </blockquote>

  <p>Many thanks to Mike for helping me out here, I owe you a beer at WWDC10. &#194;&nbsp;For those of you interested in the more masochistic way to get around the issues, feel free to continue reading:</p>

  <p>A note before I begin: Everything below was done with the final build of the iPhone OS 3.0 SDK and I was building an app using the 2.2.1 frameworks.</p>

  <p>I recently acquired a new iPod touch to use a development device. &#194;&nbsp;One of the first things that I wanted to do was get my existing project up and running on the device so I headed over to the iPhone Development Program Portal to update my provisioning profile.</p>

  <p>After adding the new device to my app&#8217;s provisioning profile I downloaded the updated profile and installed it into Xcode and onto the device via the Organizer. &#194;&nbsp;So far so good, everything up until this point worked exactly as I expected it to.</p>

  <p>Switching back to my project I changed my build settings to be a Release build under 2.2.1 on the device. &#194;&nbsp;The app built fine, but I got an error when it tried to install the app onto the device, something error akin to &#8220;This device doesn&#8217;t contain the provisioning profile with which this app was built&#8221;. &#194;&nbsp;Thinking that maybe Xcode just hadn&#8217;t seen the new profile yet I cleaned all targets in my project, restarted Xcode and tried again. &#194;&nbsp;No dice, same error as before.</p>

  <p>I then proceeded to delete all versions of the profile from the organizer and re-installed the new one. &#194;&nbsp;My assumption was that once Xcode saw that the old profile didn&#8217;t exists anymore it would switch over and use the new one. &#194;&nbsp;I cleaned all targets and built again. &#194;&nbsp;This time I was treated to a different error:&#194;&nbsp;&#8221;Code Sign error: Provisioning profile &#8217;3E6AA725-6534-46F8-B9CE-D19AC9FD854B&#8217; can&#8217;t be found&#8221;</p>

  <p>After a bit of Googling I discovered that Xcode stores the ID of the provisioning profile in its project.pbxproj file. &#194;&nbsp;This discovery led me to the fix:</p>

  <ol>
    <li>Close your Xcode project</li>

    <li>Navigate to your project folder in the Finder</li>

    <li>Right click on your .xcodeproj file and &#8216;Show Package Contents&#8217;</li>

    <li>Drag the&#194;&nbsp;project.pbxproj file to Xcode (or any plain text editor)</li>

    <li>Perform a search for the term &#8216;provision&#8217; to find the&#194;&nbsp;PROVISIONING_PROFILE entry.</li>

    <li>Copy the existing profile ID and paste it into the find field of a find and a replace dialog.</li>

    <li>Open up the Organizer window (Window menu &gt; Organizer) and navigate to your new profile under IPHONE DEVELOPMENT &gt; Provisioning Profiles</li>

    <li>Click on your provisioning profile and copy its Profile Identifier</li>

    <li>Paste the string into the replace field in your open find and replace dialog.</li>

    <li>Replace all instances of the identifier, save the file, close it, and reopen your Xcode project.</li>

    <li>That should do it, build and go to run your app on your new device.</li>
  </ol>

  <p>Now there is a great possibility that I am going WAY overboard here and missing a very obvious way to accomplish the same solution. &#194;&nbsp;If that&#8217;s the case please let me know in the comments.</p>This entry was posted in <a href="../../../category/cocoa/index.html" title="View all posts in Cocoa" rel="category tag">Cocoa</a>, <a href="../../../category/debugging/index.html" title="View all posts in Debugging" rel="category tag">Debugging</a>.

  <div class="nav-previous">
    <a href="../../05/iphone-timezones-and-wwdc-or-how-i-stopped-worrying-and-learned-to-love-ical/index.html" rel="prev"><span class="meta-nav">&#8592;</span> iPhone, Timezones, and WWDC (or, How I Stopped Worrying and Learned to Love iCal)</a>
  </div>

  <div class="nav-next">
    <a href="../i-am-not-a-name-thief/index.html" rel="next">I am Not a Name Thief <span class="meta-nav">&#8594;</span></a>
  </div>

  <h2 class="comments-title">9 thoughts on &#8220;<span>Bypassing the Trouble Caused by Updating an iPhone App Provisioning Profile</span>&#8221;</h2>

  <ol class="commentlist">
    <li class="comment even thread-even depth-1" id="li-comment-206">
      <div class="comment-author vcard">
        <cite class="fn">Mark</cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-206">June 19, 2009 at 2:28 PM</a>
      </div>

      <div class="comment-content">
        <p>Do a &#8216;Get Info&#8217; on the root of your project in the &#8220;Groups &amp; Files&#8221; view. There should be a &#8220;Code Signing Identity&#8221; setting. All you should have to do is set that to the correct provisioning profile. I do it for all configurations and that is it.</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-207">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://steveweller.com' rel='external nofollow' class='url'>Steve Weller</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-207">June 29, 2009 at 10:33 AM</a>
      </div>

      <div class="comment-content">
        <p>I&#8217;ve found provisioning profiles to be finicky. You have to install them in two places (both in the organizer, IIRC) and then sync with iTunes, and occasionally reboot the device as well.</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment even thread-even depth-1" id="li-comment-208">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://navicad.com' rel='external nofollow' class='url'>Chuck Han</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-208">September 8, 2009 at 9:31 AM</a>
      </div>

      <div class="comment-content">
        <p>@Mark (#1 comment):<br>
        Your solution does not always work. It&#8217;s the way you&#8217;re SUPPOSED to do it, but if you&#8217;ve created projects from previous projects, you might have several entries in the project.pbxproj file XCBuildConfiguration section with the same name. This problem might be an artifact of the fact that I name all my provisioning profiles with the same suffix (x DEBUG, x RELEASE, x AD HOC, and x APP STORE) for builds that I want to put on the device for organizational sanity.</p>

        <p>Thus I have to go through similar hoops that are specified above. However, I&#8217;ve found that the simpler way is to:</p>

        <p>1. close xCode<br>
        2. delete the PROVISIONING_PROFILE lines in the project.pbxproj file<br>
        3. open the project in Xcode<br>
        4. specify the build and click the Info button to re-specify the code signing identy&#8211;I&#8217;ve got multiple provisioning profiles running around, so I need to do this.</p>

        <p>I&#8217;ve tried the replacement method, and I inevitably mess it up. And I don&#8217;t like the updated method either.</p>

        <p>thanks, Chuck</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-209">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://navicad.com' rel='external nofollow' class='url'>Chuck Han</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-209">September 8, 2009 at 9:33 AM</a>
      </div>

      <div class="comment-content">
        <p>Just to be safe, between steps 1 and 2 of my description above, it&#8217;s wise to make a copy of the project.pbxproj file before editing it!</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment even thread-even depth-1" id="li-comment-210">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://twitter.com/Rick_smith' rel='external nofollow' class='url'>Rick</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-210">September 11, 2009 at 10:59 PM</a>
      </div>

      <div class="comment-content">
        <p>I&#8217;m trying to get some help in regards to a demo software I was sent.</p>

        <p>I have the provision file and the app. where do i install these 2 files?</p>

        <p>I can&#8217;t get this app to install on my phone..please help.</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-211">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://fruitstandsoftware.com' rel='external nofollow' class='url'>Michael</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-211">September 11, 2009 at 11:05 PM</a>
      </div>

      <div class="comment-content">
        <p>Rick,</p>

        <p>You can drag those two files to the Applications section in iTunes and then sync your phone. The app should be installed then.</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment even thread-even depth-1" id="li-comment-212">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://twitter.com/Rick_smith' rel='external nofollow' class='url'>Rick</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-212">September 11, 2009 at 11:07 PM</a>
      </div>

      <div class="comment-content">
        <p>so i put the .provision file int he same folder with the .ipa files? that would be the only odd ball in there.</p>

        <p>I tried that, but the app still isn&#8217;t syncing to my phone</p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-213">
      <div class="comment-author vcard">
        <cite class="fn"><a href='http://fruitstandsoftware.com' rel='external nofollow' class='url'>Michael</a></cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-213">September 11, 2009 at 11:57 PM</a>
      </div>

      <div class="comment-content">
        <p>Rick, check out this link for step by step instructions: <a href="http://www.innerfence.com/howto/install-iphone-application-ad-hoc-distribution" rel="nofollow">http://www.innerfence.com/howto/install-iphone-application-ad-hoc-distribution</a></p>
      </div>

      <div class="reply"></div>
    </li>

    <li class="comment even thread-even depth-1" id="li-comment-214">
      <div class="comment-author vcard">
        <cite class="fn">Jimmy</cite> <span class="says">says:</span>
      </div>

      <div class="comment-meta commentmetadata">
        <a href="comment-page-1/index.html#comment-214">November 1, 2009 at 8:34 PM</a>
      </div>

      <div class="comment-content">
        <p>I was also having this problem and I had the PROVISIONING_PROFILE duplicated in project.pbxproj. I found the easiest method was just to delete the existing configuration I had called &#8220;Release Ad-Hoc&#8221; and then recreate it. This was easier than manually editing the project.pbxproj.</p>
      </div>

      <div class="reply"></div>
    </li>
  </ol>

</body>
</html>
