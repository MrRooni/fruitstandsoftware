<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="initial-scale=1">
<title>Custom Drawing Using drawRect, Part 1 | Core Fruition</title>


			<link rel="alternate" type="application/rss+xml" title="Core Fruition &raquo; Custom Drawing Using drawRect, Part 1 Comments Feed" href="feed/index.html" />
<link rel='prev' title='Bottom Bars in Interface Builder' href='../bottom-bars-in-interface-builder/index.html' />
<link rel='next' title='Friday Q&amp;A: NSNotificationQueue' href='../../../2010/01/friday-qa-nsnotificationqueue/index.html' />
</head>

<body class="single single-post postid-437 single-format-standard custom-background group-blog">



		
			

			
				

	
		<h1>Custom Drawing Using drawRect, Part 1</h1>

		
			<a href="index.html" title="10:01 PM" rel="bookmark">
	

	
		<p style="text-align: justify;">One of the more advanced techniques for creating custom user interfaces on the Mac is the use of NSView&#8217;s drawRect method.  Many answers to questions on StackOverflow and Apple&#8217;s mailing lists include recommendations to &#8220;just override drawRect and do the drawing yourself&#8221;.  Some folks see this recommendation and their eyes glaze over, thinking that it&#8217;s too advanced of a technique for them to wrap their heads around.  Over the next few days I&#8217;m going to go over some basic techniques that can yield powerful results.</p>
<p style="text-align: justify;">Let&#8217;s start by setting up the Xcode project that will be the basis of the rest of these posts.</p>
<ul style="text-align: justify;">
<li>Open Xcode and create a new Cocoa Application project called DrawingSample.</li>
<li>Create a new NSView subclass called CustomDrawingView.</li>
<li>Open MainMenu.xib, add a new Custom View to the Main Window, set its class to be CustomDrawingView, and set it&#8217;s autosizing flags as seen here:</li>
</ul>
<p><a href="http://fruitstandsoftware.com/blog/wp-content/uploads/2009/12/Screen-shot-2009-12-18-at-8.14.10-PM.png"><img class="size-full wp-image-438 aligncenter" title="DrawingSample IB Layout" src="http://fruitstandsoftware.com/blog/wp-content/uploads/2009/12/Screen-shot-2009-12-18-at-8.14.10-PM.png" alt="DrawingSample IB Layout" width="789" height="459" /></a></p>
<p style="text-align: justify;">Save and Quit Interface Builder and switch back to Xcode.  Open CustomDrawingView.m, it should look like so:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="objc" style="font-family:monospace;"><span style="color: #a61390;">@implementation</span> CustomDrawingView
&nbsp;
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>initWithFrame<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">NSRect</span><span style="color: #002200;">&#41;</span>frame <span style="color: #002200;">&#123;</span>
    self <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>super initWithFrame<span style="color: #002200;">:</span>frame<span style="color: #002200;">&#93;</span>;
    <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span>
        <span style="color: #11740a; font-style: italic;">// Initialization code here.</span>
    <span style="color: #002200;">&#125;</span>
    <span style="color: #a61390;">return</span> self;
<span style="color: #002200;">&#125;</span>
&nbsp;
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>drawRect<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">NSRect</span><span style="color: #002200;">&#41;</span>dirtyRect <span style="color: #002200;">&#123;</span>
    <span style="color: #11740a; font-style: italic;">// Drawing code here.</span>
<span style="color: #002200;">&#125;</span>
&nbsp;
<span style="color: #a61390;">@end</span></pre></td></tr></table></div>

<p style="text-align: justify;">We&#8217;re going to start (and finish) today with just a simple concept and some basic drawing that will set the stage for the future posts. All drawing in Cocoa is done by first setting up the environment in which you want to draw, and then doing the actual drawing. For instance, if we want to draw a blue box, we first have to setup the color blue, define the bounds of the box, and then draw it.  In this case we are using the NSRect that is passed to the drawRect method as the box we want to draw, and we setup the color blue by calling [[NSColor blueColor] set].  We then use the convenience method NSRectFill to fill the dirtyRect with the color blue.  Notice that we didn&#8217;t pass the color to NSRectFill, we set it, and from then on anything we draw will be blue until we change the color.</p>
<p style="text-align: justify;">You can think of drawing in Cocoa much the same way as you would think of painting with a brush.  You dip your brush in a certain paint color, paint the shape you want to paint, and then dip your brush in a new color and paint some more.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="objc" style="font-family:monospace;"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>drawRect<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">NSRect</span><span style="color: #002200;">&#41;</span>dirtyRect <span style="color: #002200;">&#123;</span>
	<span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><span style="color: #400080;">NSColor</span> blueColor<span style="color: #002200;">&#93;</span> set<span style="color: #002200;">&#93;</span>;
	NSRectFill<span style="color: #002200;">&#40;</span>dirtyRect<span style="color: #002200;">&#41;</span>;
<span style="color: #002200;">&#125;</span></pre></td></tr></table></div>

<p style="text-align: justify;">The preceding code, when run, will generate a view that looks like this:</p>
<p style="text-align: justify;"><a href="http://fruitstandsoftware.com/blog/wp-content/uploads/2009/12/Screen-shot-2009-12-18-at-8.51.12-PM.png"><img class="aligncenter size-full wp-image-444" title="NSRectFill" src="http://fruitstandsoftware.com/blog/wp-content/uploads/2009/12/Screen-shot-2009-12-18-at-8.51.12-PM.png" alt="NSRectFill" width="560" height="462" /></a>Now, this may not look like much, but in future posts we will build on these concepts and, hopefully, by the end have drawn some pretty cool and useful things.</p>
			</div>

	
		This entry was posted in <a href="../../../category/cocoa/index.html" title="View all posts in Cocoa" rel="category tag">Cocoa</a>, <a href="../../../category/design/index.html" title="View all posts in Design" rel="category tag">Design</a>, <a href="../../../category/sample-code/index.html" title="View all posts in Sample Code" rel="category tag">Sample Code</a> and tagged <a href="../../../tag/cocoa/index.html" rel="tag">Cocoa</a>, <a href="../../../tag/drawing/index.html" rel="tag">drawing</a>, <a href="../../../tag/objective-c/index.html" rel="tag">Objective-C</a>, <a href="../../../tag/sample-code/index.html" rel="tag">Sample Code</a>, <a href="../../../tag/uiview/index.html" rel="tag">UIView</a>. 
			


					
		

	
		<div class="nav-previous"><a href="../bottom-bars-in-interface-builder/index.html" rel="prev"><span class="meta-nav">&larr;</span> Bottom Bars in Interface Builder</a></div>		<div class="nav-next"><a href="../../../2010/01/friday-qa-nsnotificationqueue/index.html" rel="next">Friday Q&#038;A: NSNotificationQueue <span class="meta-nav">&rarr;</span></a></div>
	
	
	
				

	

	
			<h2 class="comments-title">
			One thought on &ldquo;<span>Custom Drawing Using drawRect, Part 1</span>&rdquo;		</h2>

		
		<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="li-comment-248">
		
			<footer>
				<div class="comment-author vcard">
										<cite class="fn">Scott</cite> <span class="says">says:</span>				</div>
				
				<div class="comment-meta commentmetadata">
					<a href="comment-page-1/index.html#comment-248">
					December 19, 2009 at 11:17 AM					</a>
									</div>
			

			<div class="comment-content"><p>You should mention that the object you&#8217;re actually setting when you send messages such as [[NSColor blueColor] set]; is the NSGraphicsContext.  This was a major point of confusion for me.</p>
</div>

			<div class="reply">
							</div>
		

	</li>
		</ol>

		
	
			<p class="nocomments">Comments are closed.</p>
	
			
</div>

			
			</div>
		</div>

		
						
			
				
						
				</aside>

						</div>
			
			
							
					<h1 class="widget-title">Archives</h1>
					<ul>
							<li><a href='../../../2013/05/index.html'>May 2013</a></li>
	<li><a href='../../../2013/04/index.html'>April 2013</a></li>
	<li><a href='../../../2013/02/index.html'>February 2013</a></li>
	<li><a href='../../../2012/08/index.html'>August 2012</a></li>
	<li><a href='../../../2012/07/index.html'>July 2012</a></li>
	<li><a href='../../../2012/06/index.html'>June 2012</a></li>
	<li><a href='../../../2012/05/index.html'>May 2012</a></li>
	<li><a href='../../../2010/06/index.html'>June 2010</a></li>
	<li><a href='../../../2010/03/index.html'>March 2010</a></li>
	<li><a href='../../../2010/01/index.html'>January 2010</a></li>
	<li><a href='../index.html'>December 2009</a></li>
	<li><a href='../../10/index.html'>October 2009</a></li>
	<li><a href='../../09/index.html'>September 2009</a></li>
	<li><a href='../../08/index.html'>August 2009</a></li>
	<li><a href='../../07/index.html'>July 2009</a></li>
	<li><a href='../../06/index.html'>June 2009</a></li>
	<li><a href='../../05/index.html'>May 2009</a></li>
	<li><a href='../../04/index.html'>April 2009</a></li>
	<li><a href='../../03/index.html'>March 2009</a></li>
	<li><a href='../../02/index.html'>February 2009</a></li>
	<li><a href='../../01/index.html'>January 2009</a></li>
	<li><a href='../../../2008/11/index.html'>November 2008</a></li>
	<li><a href='../../../2008/09/index.html'>September 2008</a></li>
	<li><a href='../../../2008/08/index.html'>August 2008</a></li>
	<li><a href='../../../2008/07/index.html'>July 2008</a></li>
					</ul>
				</aside>
						</div>
			
			
							
					
					<ul>
												
											</ul>
				</aside>
						</div>
		</div>

</div>
</div>


<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/www.fruitstandsoftware.com\/blog\/wp-admin\/admin-ajax.php","post_id":"437"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/wp-postviews/postviews-cache-ver=1.64.js'></script>
<script type='text/javascript' src='../../../wp-content/themes/landscape/js/small-menu-ver=20120206.js'></script>

</body>
</html>



